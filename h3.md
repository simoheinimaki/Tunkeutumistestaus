# h3
## Tiivistelmät
### OWASP 2021

#### A01:2021 – Broken Access Control 

Access controllilla mahdollistetaan käyttäjien toimiminen vain omien oikeuksien puitteissa. Esimerkiksi johtajilla voi olla korkeammat oikeudet kuin perus työntekijällä. On olemassa kuitenkin keinoja, millä omia oikeuksia voi kohottaa, tai tarkistukset voi ohittaa.

### PortSwigget Academy
#### Insecure direct object references (IDOR)
IDOR haavoittuvaisuudella tarkoitetaan sitä, kun tunnistautumiseen käytetään jotain muutettavaa arvoa ja se on vapaasti muutettavissa. Esimerkiksi url osoitteessa voi lopussa lukea käyttäjän numero, jota vaihtamalla pääsee käsiksi toisen käyttäjän tietoihin.
#### Path traversal
Path traversal on haavoittuvuus, jossa hyökkääjä pääsee käsiksi koodiin tai sovelluksen tiedostoihin, joka voi sisältää esimerkiksi käyttäjätunnuksia tai arkaluontoisia dokumentteja ja tiedostoja. Joissain hyökkäystapauksissa hyökkääjä pääsee myös muokkaamaan tärkeitä tiedostoja.
#### Cross-site scripting
Cross-site scriptingillä tarkoitetaan hyökkääjän syöttämää Java-sript koodia verkkosivun sisältöön. Kun koodi on sisällytetty sivustolle, voi hyökkääjä manipuloida toisen sivun käyttäjän kokemusta nettisivulla.
## a) Totally Legit Sertificate
Asensin zaproxyn komennolla:

    sudo apt-get install zaproxy
<img width="751" height="297" alt="kuva" src="https://github.com/user-attachments/assets/470e433d-2684-4696-9be6-84bbad1b3356" />

Asennuksen jälkeen lähdin etsimään CA sertifikaattia ZAP:issa. Jokaisen ohjeen mukaan polku on "Tools -> Options -> Dynamic SSL Certificates", mutta tätä viimeista kohtaa ei ole ZAP:issa ollenkaan. Lopulta Löysin CA sertifikaatin kohdasta Network, ja tallensin valmiiksi generoidun sertifikaatin koneelleni.
<img width="827" height="612" alt="kuva" src="https://github.com/user-attachments/assets/8cd6f459-1190-402b-9405-cd63a06a473e" />

Importtasin Generoidun sertifikaatin selaimeen Firefoxin Privacy & Security asetuksista.
<img width="702" height="492" alt="kuva" src="https://github.com/user-attachments/assets/d5f9bd90-162e-4cba-9bb0-b3197c2f31d6" />

<img width="657" height="87" alt="kuva" src="https://github.com/user-attachments/assets/ca8edc53-2743-4aa8-a469-4640442514a3" />

Lisäsin ZAP:in proxyksi ja kokeilin ilmestyykö hakupyynnöt ZAP:iin virkistämällä sivun.
<img width="772" height="748" alt="kuva" src="https://github.com/user-attachments/assets/918f9376-ff97-409d-9362-c12e88cc2f71" />

<img width="1907" height="380" alt="kuva" src="https://github.com/user-attachments/assets/ac456db0-e3de-427f-9650-8f58d5d1a628" />

## b) Kettumaista
Asensin FoxyProxyn firefoxiin ja lisäsin zapin proxyksi:
<img width="1251" height="555" alt="kuva" src="https://github.com/user-attachments/assets/d79bc3df-2d6c-48a8-a8d1-c35baba6c539" />

Lisäsin vielä Patterns toiminnolla localhostin ja Portswiggerin, jotta vain ne ohjautuvat proxyyn

<img width="1228" height="520" alt="kuva" src="https://github.com/user-attachments/assets/9e9d930b-c26f-4eae-beb8-4a02af079ba0" />

## c)
Ratkaistaakseni labran kirjoitin alert scriptin nettisivun hakukenttään ja painoin search. Näin pääsin syöttämään javascriptia sivustolle ja kutsumaan alert funktiota.

        <script>alert(1)</script>
<img width="378" height="111" alt="kuva" src="https://github.com/user-attachments/assets/f28b9810-2af4-42fa-a015-98df0162ee5e" />

## d)
Tähän tehtävään syötin saman alert scriptin blogipostauksen kommenttikenttään.
<img width="992" height="626" alt="kuva" src="https://github.com/user-attachments/assets/6c1be69d-6f87-45e7-9e8e-e625efbcbf00" />
palatessani blogiin, olin kutsunut alert funktiota ja tulostanut "1"
<img width="665" height="231" alt="kuva" src="https://github.com/user-attachments/assets/72651286-564c-4c9b-a8e7-7289db3aef59" />

## e)
XSS-hyökkäyksessä voidaan siepata toisen käyttäjän evästeet omalle koneelle. Kun saat toisen käyttäjän istuntoevästeen, voit siepata istunnon ilman salasanaa. Sepattuasi istunnon, voit suorittaa toimintoja tai kopioida tietoja uhrin nimissä.

## f)
Tässä kohtaa ZAP ja/tai FoxyProxy lakkasi toimimasta. En päässyt enään millekkään nettisivulle jos proxy oli päällä... Yritän uudestaan myöhemmin
## g)

## h)

## i)
## Lähteet
Tehtäväsivu: https://terokarvinen.com/tunkeutumistestaus/#aikataulu

OWASP 2021: OWASP Top 10:2021: https://owasp.org/Top10/A01_2021-Broken_Access_Control/

PortSwigger Academy. IDOR: https://portswigger.net/web-security/access-control/idor

Port Swigger Academy. Path traversal: https://portswigger.net/web-security/file-path-traversal

Port Swigger Academy. Cross-site scripting: https://portswigger.net/web-security/cross-site-scripting

ZAP-Getting started: https://www.zaproxy.org/getting-started/
